(this["webpackJsonpfinal-fantasy-pure-html-experiment"]=this["webpackJsonpfinal-fantasy-pure-html-experiment"]||[]).push([[0],[,,,,,,,,function(e,t,a){e.exports=a.p+"static/media/cloud.238f74a1.gif"},function(e,t,a){e.exports=a.p+"static/media/dragon.b50ac62f.gif"},,function(e,t,a){e.exports=a(18)},,,,,function(e,t,a){},function(e,t,a){},function(e,t,a){"use strict";a.r(t);var n=a(0),c=a.n(n),r=a(7),l=a.n(r),i=(a(16),a(10)),s=a(1),o=a(3),m=a(5);function u(e,t){return e=Math.ceil(e),t=Math.floor(t),Math.floor(Math.random()*(t-e+1)+e)}var f=a(8),b=a.n(f),d=a(9),E=a.n(d);var v=function(e){var t=Object(n.useState)(!1),a=Object(s.a)(t,2),c=a[0],r=a[1];function l(t){t.key===e&&r(!0)}var i=function(t){t.key===e&&r(!1)};return Object(n.useEffect)((function(){return window.addEventListener("keydown",l),window.addEventListener("keyup",i),function(){window.removeEventListener("keydown",l),window.removeEventListener("keyup",i)}}),[l,i]),c};var O=Object(n.memo)((function(e){var t=e.atb,a=e.onAttack,r=Object(n.useState)(0),l=Object(s.a)(r,2),i=l[0],o=l[1],m=v("ArrowUp"),u=v("ArrowDown"),f=v(" "),b=t>=1;Object(n.useEffect)((function(){m&&o((function(e){return e-1})),u&&o((function(e){return e+1}))}),[m,u]);var d=Object(n.useMemo)((function(){return Math.abs(i%3)}),[i]);return Object(n.useEffect)((function(){var e=!1;return b&&f&&!e&&(e=!0,console.log("select ",d),0===d&&a()),function(){return e=!1}})),c.a.createElement("aside",{className:"FF-Hud"},c.a.createElement("div",{className:"FF-Hud-Panel"},c.a.createElement("ul",{style:{transition:"all 200ms ease-out",opacity:b?1:0}},c.a.createElement("li",{className:"FF-Hud-Panel-Action"},c.a.createElement("span",{className:0===d?"triangle":"selectiable"}),c.a.createElement("span",null,"Attack")),c.a.createElement("li",{className:"FF-Hud-Panel-Action"},c.a.createElement("span",{className:1===d?"triangle":"selectiable"}),c.a.createElement("span",null,"Magic")),c.a.createElement("li",{className:"FF-Hud-Panel-Action"},c.a.createElement("span",{className:2===d?"triangle":"selectiable"}),c.a.createElement("span",null,"Items")))),c.a.createElement("div",{className:"FF-Hud-Panel"},c.a.createElement("ul",null,c.a.createElement("li",{className:"FF-Hud-Panel-Player"},c.a.createElement("span",{className:"selectiable"}),c.a.createElement("span",{className:"name"},"Cloud"),c.a.createElement("span",null,"389 / 440"),c.a.createElement("meter",{id:"active_time",value:t})))))}));a(17);function p(e){var t=e.src,a=e.name,n=e.number,r=e.isBeingHit,l=e.style,i=Object(m.a)(e,["src","name","number","isBeingHit","style"]),s=r?"damage 400ms linear":"idle infinite 4s linear";return c.a.createElement("img",Object.assign({src:t,className:"FF-Battle-Enemy1",alt:"".concat(a," #").concat(n),style:Object(o.a)({animation:s},l)},i))}function j(e){var t=e.name,a=e.isAttacking,n=e.style,r=Object(m.a)(e,["name","isAttacking","style"]),l=a?"attack 2s linear":"idle infinite 4s linear";return c.a.createElement("img",Object.assign({src:b.a,className:"FF-Battle-Player1",alt:t,style:Object(o.a)({animation:l},n)},r))}var g={name:"CLOUD",atb:0,atbRate:[12,21]},y={name:"DRAGON",atb:0,atbRate:[8,12]};var F=function(){var e=Object(n.useState)(g),t=Object(s.a)(e,2),a=t[0],r=t[1],l=Object(n.useState)(y),m=Object(s.a)(l,2),f=m[0],b=(m[1],Object(n.useState)([!1,null])),d=Object(s.a)(b,2),v=d[0],F=d[1],w=Object(n.useState)([!1,null]),h=Object(s.a)(w,2),k=h[0],N=h[1];return Object(n.useEffect)((function(){var e;return e=setInterval((function(){if(a.atb<1){var e=u.apply(void 0,Object(i.a)(a.atbRate))/100;r((function(t){return Object(o.a)({},t,{atb:t.atb+e})}))}}),800),function(){clearInterval(e)}}),[a.atb,a.atbRate]),c.a.createElement("div",{className:"FF-Battle"},c.a.createElement("div",{className:"FF-Battle-Background"},c.a.createElement(p,{name:f.name,number:1,src:E.a,isBeingHit:k[0]&&k[1]===f.name}),c.a.createElement(j,{name:"CLOUD",style:{right:70},isAttacking:v[0]&&v[1]===a.name}),c.a.createElement(O,{atb:a.atb,onAttack:function(){F([!0,a.name]),setTimeout((function(){N([!0,f.name])}),1e3),setTimeout((function(){r((function(e){return Object(o.a)({},e,{atb:0})})),F([!1,a.name]),N([!1,f.name])}),2e3)}})))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));l.a.render(c.a.createElement(c.a.StrictMode,null,c.a.createElement(F,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}],[[11,1,2]]]);
//# sourceMappingURL=main.4ca974b5.chunk.js.map